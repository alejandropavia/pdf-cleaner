<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PDF Cleaner — Herramienta</title>
  <style>
    :root{
      --bg:#f7f8fa; --card:#fff; --text:#0f172a; --muted:#475569;
      --line:#e5e7eb; --shadow:0 10px 30px rgba(0,0,0,0.08);
      --btn:#111; --btn2:#fff; --ok:#16a34a; --danger:#dc2626;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1080px;margin:0 auto;padding:28px 18px 70px}
    .top{display:flex;align-items:center;justify-content:space-between;gap:14px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;background:#111;color:#fff}
    .nav{display:flex;gap:14px;font-size:13px;color:var(--muted)}

    .hero{margin-top:18px;background:var(--card);border:1px solid var(--line);
      border-radius:18px;padding:22px;box-shadow:var(--shadow);
      display:grid;grid-template-columns:1.1fr 0.9fr;gap:16px}
    @media(max-width:900px){.hero{grid-template-columns:1fr}}

    h1{margin:0 0 8px;font-size:34px;line-height:1.15;letter-spacing:-0.5px}
    .sub{margin:0 0 14px;color:var(--muted);font-size:14px;line-height:1.5}

    .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 8px 22px rgba(0,0,0,0.04)}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}

    .btn{border-radius:12px;padding:12px 16px;border:1px solid #111;
      font-weight:800;font-size:14px;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
    .btn.primary{background:var(--btn);color:#fff}
    .btn.secondary{background:var(--btn2);color:#111}

    .field{display:flex;flex-direction:column;gap:6px;margin:10px 0}
    label{font-size:13px;color:var(--muted)}
    input[type="file"], select{
      padding:10px;border-radius:12px;border:1px solid var(--line);background:#fff;
      font-size:14px;
    }

    .note{font-size:12px;color:var(--muted);line-height:1.4;margin-top:10px}
    .ok{color:var(--ok);font-weight:900}
    .danger{color:var(--danger);font-weight:900}
    .footer{margin-top:18px;text-align:center;color:var(--muted);font-size:12px}
    .pill{display:inline-block;font-size:12px;padding:5px 10px;border-radius:999px;border:1px solid var(--line);color:var(--muted)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
  </style>

  <script>
    function setBusy(on){
      const btn = document.getElementById("submitBtn");
      const hint = document.getElementById("hint");
      btn.disabled = on;
      btn.style.opacity = on ? "0.7" : "1";
      hint.textContent = on ? "Procesando… (si el PDF es grande puede tardar unos segundos)" : "";
    }
    function onSubmit(){
      setBusy(true);
      return true;
    }
  </script>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="badge">B2B</span> PDF Cleaner</div>
      <div class="nav">
        <a href="/">Inicio</a>
        <a href="/#precios">Precios</a>
      </div>
    </div>

    <section class="hero">
      <div class="card">
        <h1>Herramienta</h1>
        <p class="sub">
          Sube tu PDF y descárgalo optimizado: <span class="ok">limpia páginas en blanco</span> + <span class="ok">reduce peso</span>.
          No guardamos tus archivos.
        </p>

        <form action="/process" method="post" enctype="multipart/form-data" onsubmit="return onSubmit()">
          <!-- ✅ TOKEN (se rellena desde app.py con /app?token=...) -->
          <input type="hidden" name="token" value="%%TOKEN%%">

          <div class="field">
            <label><b>1) PDF</b> (solo .pdf)</label>
            <input type="file" name="file" accept="application/pdf" required>
          </div>

          <div class="field">
            <label><b>2) Calidad / Compresión</b></label>
            <select name="quality">
              <option value="screen">Máxima compresión (screen) — ideal para email</option>
              <option value="ebook">Equilibrado (ebook) — buena calidad</option>
              <option value="printer">Mejor calidad (printer) — menos compresión</option>
            </select>
          </div>

          <div class="row">
            <button id="submitBtn" class="btn primary" type="submit">✅ Limpiar y descargar</button>
            <a class="btn secondary" href="/">Volver</a>
          </div>

          <div id="hint" class="note"></div>

          <div class="note">
            <span class="pill">Gratis: {FREE_MONTHLY_LIMIT} PDFs/mes · máx. {FREE_MAX_MB} MB</span>
            <span class="pill">Pro: {PRO_MONTHLY_LIMIT} PDFs/mes · máx. {PRO_MAX_MB} MB</span>
            <span class="pill">Business: {BUSINESS_MONTHLY_LIMIT} PDFs/mes · máx. {BUSINESS_MAX_MB} MB</span>
          </div>

          <div class="note">
            Si has pagado y aun así te limita como gratis: estás entrando sin token.
            Vuelve desde Stripe (te redirige automáticamente a <span class="mono">/app?token=...</span>).
          </div>
        </form>
      </div>

      <div class="card">
        <b>Tips rápidos</b>
        <ul style="margin:10px 0 0; padding-left:18px; color:var(--muted); font-size:13px; line-height:1.6;">
          <li>Para máximo ahorro de peso: usa <b>screen</b>.</li>
          <li>Si es un PDF escaneado, suele bajar mucho más.</li>
          <li>Si te sale error de Ghostscript, Render no lo tiene instalado (habría que meter buildpack/apt).</li>
        </ul>
        <div class="footer">Versión: {APP_VERSION}</div>
      </div>
    </section>
  </div>
</body>
</html>
